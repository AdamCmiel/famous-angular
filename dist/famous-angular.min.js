/**
 * famous-angular - Bring structure to your Famo.us apps with the power of AngularJS. Famo.us/Angular integrates seamlessly with existing Angular and Famo.us apps.
 * @version v0.2.0
 * @link https://github.com/Famous/famous-angular
 * @license MPL v2.0
 */
"use strict";var ngFameApp=angular.module("famous.angular",[]);ngFameApp.provider("$famous",function(){var e={"famous/core/Context":famous.core.Context,"famous/core/ElementAllocator":famous.core.ElementAllocator,"famous/core/Engine":famous.core.Engine,"famous/core/Entity":famous.core.Entity,"famous/core/EventEmitter":famous.core.EventEmitter,"famous/core/EventHandler":famous.core.EventHandler,"famous/core/Group":famous.core.Group,"famous/core/Modifier":famous.core.Modifier,"famous/core/OptionsManager":famous.core.OptionsManager,"famous/core/RenderNode":famous.core.RenderNode,"famous/core/Scene":famous.core.Scene,"famous/core/SpecParser":famous.core.SpecParser,"famous/core/Surface":famous.core.Surface,"famous/core/Transform":famous.core.Transform,"famous/core/View":famous.core.View,"famous/core/ViewSequence":famous.core.ViewSequence,"famous/events/EventArbiter":famous.events.EventArbiter,"famous/events/EventFilter":famous.events.EventFilter,"famous/events/EventMapper":famous.events.EventMapper,"famous/inputs/FastClick":famous.inputs.FastClick,"famous/inputs/GenericSync":famous.inputs.GenericSync,"famous/inputs/MouseSync":famous.inputs.MouseSync,"famous/inputs/PinchSync":famous.inputs.PinchSync,"famous/inputs/RotateSync":famous.inputs.RotateSync,"famous/inputs/ScaleSync":famous.inputs.ScaleSync,"famous/inputs/ScrollSync":famous.inputs.ScrollSync,"famous/inputs/TouchSync":famous.inputs.TouchSync,"famous/inputs/TouchTracker":famous.inputs.TouchTracker,"famous/inputs/TwoFingerSync":famous.inputs.TwoFingerSync,"famous/math/Matrix":famous.math.Matrix,"famous/math/Quaternion":famous.math.Quaternion,"famous/math/Random":famous.math.Random,"famous/math/Utilities":famous.math.Utilities,"famous/math/Vector":famous.math.Vector,"famous/modifiers/Draggable":famous.modifiers.Draggable,"famous/modifiers/Fader":famous.modifiers.Fader,"famous/modifiers/ModifierChain":famous.modifiers.ModifierChain,"famous/modifiers/StateModifier":famous.modifiers.StateModifier,"famous/surfaces/CanvasSurface":famous.surfaces.CanvasSurface,"famous/surfaces/ContainerSurface":famous.surfaces.ContainerSurface,"famous/surfaces/FormContainerSurface":famous.surfaces.FormContainerSurface,"famous/surfaces/ImageSurface":famous.surfaces.ImageSurface,"famous/surfaces/InputSurface":famous.surfaces.InputSurface,"famous/surfaces/SubmitInputSurface":famous.surfaces.SubmitInputSurface,"famous/surfaces/TextareaSurface":famous.surfaces.TextareaSurface,"famous/surfaces/VideoSurface":famous.surfaces.VideoSurface,"famous/transitions/CachedMap":famous.transitions.CachedMap,"famous/transitions/Easing":famous.transitions.Easing,"famous/transitions/MultipleTransition":famous.transitions.MultipleTransition,"famous/transitions/SnapTransition":famous.transitions.SnapTransition,"famous/transitions/SpringTransition":famous.transitions.SpringTransition,"famous/transitions/Transitionable":famous.transitions.Transitionable,"famous/transitions/TransitionableTransform":famous.transitions.TransitionableTransform,"famous/transitions/TweenTransition":famous.transitions.TweenTransition,"famous/transitions/WallTransition":famous.transitions.WallTransition,"famous/utilities/KeyCodes":famous.utilities.KeyCodes,"famous/utilities/Timer":famous.utilities.Timer,"famous/utilities/Utility":famous.utilities.Utility,"famous/views/Deck":famous.views.Deck,"famous/views/EdgeSwapper":famous.views.EdgeSwapper,"famous/views/FlexibleLayout":famous.views.FlexibleLayout,"famous/views/Flipper":famous.views.Flipper,"famous/views/GridLayout":famous.views.GridLayout,"famous/views/HeaderFooterLayout":famous.views.HeaderFooterLayout,"famous/views/Lightbox":famous.views.Lightbox,"famous/views/RenderController":famous.views.RenderController,"famous/views/ScrollContainer":famous.views.ScrollContainer,"famous/views/Scroller":famous.views.Scroller,"famous/views/Scrollview":famous.views.Scrollview,"famous/views/SequentialLayout":famous.views.SequentialLayout,"famous/widgets/NavigationBar":famous.widgets.NavigationBar,"famous/widgets/Slider":famous.widgets.Slider,"famous/widgets/TabBar":famous.widgets.TabBar,"famous/widgets/ToggleButton":famous.widgets.ToggleButton,"famous/physics/PhysicsEngine":famous.physics.PhysicsEngine,"famous/physics/bodies/Body":famous.physics.bodies.Body,"famous/physics/bodies/Circle":famous.physics.bodies.Circle,"famous/physics/bodies/Particle":famous.physics.bodies.Particle,"famous/physics/bodies/Rectangle":famous.physics.bodies.Rectangle,"famous/physics/constraints/Collision":famous.physics.constraints.Collision,"famous/physics/constraints/Constraint":famous.physics.constraints.Constraint,"famous/physics/constraints/Curve":famous.physics.constraints.Curve,"famous/physics/constraints/Distance":famous.physics.constraints.Distance,"famous/physics/constraints/Snap":famous.physics.constraints.Snap,"famous/physics/constraints/Surface":famous.physics.constraints.Surface,"famous/physics/constraints/Wall":famous.physics.constraints.Wall,"famous/physics/constraints/Walls":famous.physics.constraints.Walls,"famous/physics/forces/Drag":famous.physics.forces.Drag,"famous/physics/forces/Force":famous.physics.forces.Force,"famous/physics/forces/Repulsion":famous.physics.forces.Repulsion,"famous/physics/forces/RotationalDrag":famous.physics.forces.RotationalDrag,"famous/physics/forces/RotationalSpring":famous.physics.forces.RotationalSpring,"famous/physics/forces/Spring":famous.physics.forces.Spring,"famous/physics/forces/VectorField":famous.physics.forces.VectorField,"famous/physics/integrators/SymplecticEuler":famous.physics.integrators.SymplecticEuler};this.registerModule=function(r,n){e[r]=n},e.getIsolate=function(e){return"isolate"in e?e.isolate[e.$id]:{}},e.find=function(r){var n=angular.element(window.document.querySelectorAll(r)),o=function(e){var r=[];return angular.forEach(e,function(e,n){r[n]=angular.element(e).scope()}),r}(n),a=function(r){var n=[];return angular.forEach(r,function(r,o){n[o]=e.getIsolate(r)}),n}(o);return a},this.$get=function(){return e}}),angular.module("famous.angular").config(["$provide",function(e){e.decorator("$animate",["$delegate","$rootScope","$famous","$parse",function(e,r,n,o){function a(e){var r=n.getIsolate(e.scope());return r&&r.renderNode instanceof s}function t(e){var r=/^FA\-.*/;return r.test(e[0].tagName)}var s=n["famous/core/Surface"],i=n["famous/utilities/Timer"],u="$$faAnimationActive",f={enabled:e.enabled};return angular.forEach(["addClass","removeClass"],function(r){var o=angular.element.prototype[r];angular.element.prototype[r]=function(e){return o.apply(this,arguments),a(this)&&"string"==typeof e&&""!==e.trim()&&n.getIsolate(this.scope()).renderNode[r](e),this},f[r]=function(o,s,i){if(e[r](o,s,i),t(o)){var u=n.getIsolate(o.scope());if(a(o)){var f=u.renderNode;angular.forEach(s.split(" "),function(e){"ng-hide"===e?"addClass"===r?u.hide():"removeClass"===r&&u.show():f[r](e)})}else angular.forEach(s.split(" "),function(e){"ng-hide"===e&&("addClass"===r?u.hide():"removeClass"===r&&u.show())})}}}),f.setClass=function(r,o,t,s){if(e.setClass(r,o,t,s),a(r)){var i=n.getIsolate(r.scope()).renderNode;angular.forEach(o.split(" "),function(e){i.addClass(e)}),angular.forEach(t.split(" "),function(e){i.removeClass(e)})}},angular.forEach(["enter","leave","move"],function(a){f[a]=function(s){var f=this,c=arguments,l="enter"===a;l===!0&&e[a].apply(this,arguments),s.data(u)===!0&&o(s.attr("fa-animate-halt"))(s.scope()),s.data(u,!0);var d=function(){s.scope()&&s.scope().$id;if("leave"===a&&t(s)){var r=n.getIsolate(s.scope());r.id&&r.hide()}s.data(u)!==!1&&(s.data(u,!1),l===!1&&e[a].apply(f,c))};r.$$postDigest(function(){var e=s.attr("fa-animate-"+a);if(void 0===e)return void d();var r=o(e)(s.scope(),{$done:d});"number"==typeof r&&i.setTimeout(d,r)})}}),f}])}]),angular.module("famous.angular").factory("$famousDecorator",function(e){var r={child:{},parent:{},renderable:function(r){var n=e["famous/core/RenderNode"];r.renderGate=new n,r.emptyNode=new n,r.show=function(){r.renderGate&&r.renderGate.set(r.renderNode)},r.hide=function(){r.renderGate.set(r.emptyNode)}}};return{addRole:function(e,n){r[e](n)},ensureIsolate:function(e){e.isolate=e.isolate||{},e.isolate[e.$id]=e.isolate[e.$id]||{};var r=e.isolate[e.$id];r.id=e.$id;var n=e.$eval("$index");return n&&"$index"!==n&&!r.index&&(r.index=n),r},registerChild:function(e,r,n,o){e.$emit("registerChild",n),r.one("$destroy",function(){"removeMethod"in n&&n.removeMethod(n.id),o&&o()})},sequenceWith:function(e,r,n,o){e.$on("registerChild",function(a,t){a.targetScope.$id!==e.$id&&(r(t),a.stopPropagation(),n&&(t.removeMethod=n),o&&(t.updateMethod=o))})}}}),angular.module("famous.angular").service("$famousPipe",function(){function e(e,r,n){e instanceof Array||(e=[e]),r instanceof Array||(r=[r]);for(var o=0;o<e.length;o++)for(var a=0;a<r.length;a++)void 0!==r[a]&&void 0!==e[o]&&r[a][n](e[o])}this.unpipesFromTargets=function(r,n){e(r,n,"unpipe")},this.pipesToTargets=function(r,n){e(r,n,"pipe")}}),angular.module("famous.angular").factory("$timeline",function(){var e=function(e,r){return"number"==typeof e?e+r:e.map(function(e,n){return e+r[n]})},r=function(e,r){return"number"==typeof e?e-r:e.map(function(e,n){return e-r[n]})},n=function(e,r){return"number"==typeof e?e*r:e.map(function(e){return e*r})},o=function(o,a,t,s,i){return function(u){var f=s,c=-a,l=1/(t-a),d=r(i,s);return e(n(d,o(l*(u+c))),f)}};return function(e){return function(r){if(r<e[0][0])return e[0][1];for(var n=0;n<e.length-1;n++)if(e[n][0]<=r&&r<e[n+1][0]){var a=o(e[n][2],e[n][0],e[n+1][0],e[n][1],e[n+1][1]);return a(r)}return e[e.length-1][1]}}}),angular.module("famous.angular").directive("faAnimation",["$famous","$famousDecorator",function(e,r){return{restrict:"EA",scope:!0,compile:function(){var n=e["famous/core/Transform"],o=e["famous/transitions/Transitionable"],a=e["famous/transitions/Easing"];return{pre:function(e){r.ensureIsolate(e)},post:function(e,t,s){var i=r.ensureIsolate(e);setTimeout(function(){i.timeline=e.$eval(s.timeline),i._trans=new o(0),i.play=function(r){var n={duration:e.$eval(s.duration),curve:e.$eval(s.curve)||"linear"};i._trans.set(1,n,function(){r&&r(),s.loop&&setTimeout(function(){i.replay(r)},0)})},i.reset=function(){i._trans.set(0)},i.replay=function(e){i.reset(),i.play(e)};var r=null;s.event&&(r&&r(),r=e.$on(s.event,function(e,r){var n=r&&r.callback?r.callback:void 0;i.replay(n)}));s.id;if(void 0===i.timeline&&(i.timeline=i._trans.get.bind(i._trans),s.autoplay&&i.play()),!i.timeline instanceof Function)throw new Error("timeline must be a reference to a function or duration must be provided");for(var u=t[0].querySelectorAll("animate"),f={},c=0;c<u.length;c++)!function(){var r=u[c];if(r.attributes.targetmodselector){var o=angular.element(t[0].parentNode)[0].querySelectorAll(r.attributes.targetmodselector.value);angular.forEach(o,function(o){var t=angular.element(o).scope(),s=t.isolate[t.$id].modifier,u=t.isolate[t.$id].getTransform,c=r.attributes.curve&&"linear"!==r.attributes.curve.value?a[r.attributes.curve.value]:function(e){return e};if(r.attributes.field){var l=r.attributes.field.value,d=r.attributes.timelinelowerbound?parseFloat(r.attributes.timelinelowerbound.value):0,m=r.attributes.timelineupperbound?parseFloat(r.attributes.timelineupperbound.value):1;if(!r.attributes.startvalue)throw new Error("you must provide a start value for the animation");var p=e.$eval(r.attributes.startvalue.value);if(!r.attributes.endvalue)throw new Error("you must provide an end value for the animation");var v=e.$eval(r.attributes.endValue.value),g=f[t.$id]=f[t.$id]||{},h=g[l]=g[l]||[];h.push({field:l,lowerBound:d,upperBound:m,startValue:p,endValue:v,curve:c}),h.sort(function(e,r){return e.lowerBound-r.lowerBound});for(var $=1;$<h.length;$++)for(var y=h[$].lowerBound,w=0;$>w;w++)if(y<h[w].upperBound)throw new Error("Animate segments have overlappingdomains for the same field ("+l+").At any point in the timeline, only one <animate>can affect a given field on the same modifier.");var S=function(){for(var e=i.timeline()||0,r=0,n=h[r],o=0;o<h.length;o++){if(e>=h[o].lowerBound&&e<=h[o].upperBound){n=h[o];break}if(o===h.length-1){n=h[o];break}if(e>=h[o].upperBound&&e<h[o+1].lowerBound){n=h[o];break}}if(e<=n.lowerBound)return n.startValue;if(e>=n.upperBound)return n.endValue;var a=n.upperBound-n.lowerBound,t=(e-n.lowerBound)/a;if(Array.isArray(n.startValue)){for(var s=[],u=0;u<n.startValue.length;u++)s.push(n.startValue[u]+n.curve(t)*(n.endValue[u]-n.startValue[u]));return s}return n.startValue+n.curve(t)*(n.endValue-n.startValue)},b=g.transformComponents=g.transformComponents||[];"opacity"===l?s.opacityFrom(function(){return S()}):"origin"===l?s.originFrom(function(){return S()}):"size"===l?s.sizeFrom(function(){return S()}):(b.push({field:l,fn:S}),s.transformFrom(function(){for(var e={},r=u&&u()?[u()]:[],o=0;o<b.length;o++)!function(){var a=b[o].field;if(!e[a]){var t=b[o].fn();r.push(Array.isArray(t)?n[a].apply(this,t):n[a](t)),e[a]=!0}}();return 1===r.length?r[0]:n.multiply.apply(this,r)}))}})}}()},1)}}}}}]),angular.module("famous.angular").directive("faApp",["$famous","$famousDecorator",function(e,r){return{template:'<div style="display: none;"><div></div></div>',transclude:!0,scope:!0,restrict:"EA",compile:function(n,o,a){return{pre:function(n,o,a){function t(){i.apply(this,arguments)}{var s=r.ensureIsolate(n),i=e["famous/core/View"],u=e["famous/core/Engine"];e["famous/core/Transform"]}o.append('<div class="famous-angular-clipping-container"><div class="famous-angular-container"></div></div>'),s.context=u.createContext(o[0].querySelector(".famous-angular-container")),window.context=s.context;var f=function(){var e=parseInt(a.faPerspective);e&&s.context.setPerspective(e)};a.$observe("faPerspective",f),f(),t.prototype=Object.create(i.prototype),t.prototype.constructor=t;s.view=new t,s.context.add(s.view),n.$on("$destroy",function(){s.context.update=angular.noop}),n.$on("registerChild",function(e,r){s.view.add(r.renderNode),e.stopPropagation()})},post:function(e,n){var o=r.ensureIsolate(e);a(e,function(e){angular.element(n[0].querySelectorAll("div div")[0]).append(e)}),o.readyToRender=!0}}}}}]),angular.module("famous.angular").directive("faCanvasSurface",["$famous","$famousDecorator",function(e,r){return{scope:!0,transclude:!0,template:'<canvas class="fa-canvas-surface"></canvas>',restrict:"EA",compile:function(n,o,a){return{pre:function(n,o,a){{var t=r.ensureIsolate(n),s=e["famous/surfaces/CanvasSurface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}t.renderNode=new s({size:n.$eval(a.faSize)}),a.class&&t.renderNode.setClasses(a["class"].split(" "))},post:function(e,n){var o=r.ensureIsolate(e),t=function(){o.renderNode.setContent(n[0].querySelector("canvas.fa-canvas-surface"))};t(),a(e,function(e){angular.element(n[0].querySelectorAll("canvas.fa-canvas-surface")).append(e)}),r.registerChild(e,n,o,function(){})}}}}}]),angular.module("famous.angular").directive("faClick",["$parse","$famousDecorator",function(e,r){return{restrict:"A",compile:function(){return{post:function(n,o,a){var t=r.ensureIsolate(n);if(a.faClick){var s=t.renderNode._eventInput||t.renderNode;s.on("click",function(r){var o=e(a.faClick);o(n,{$event:r}),n.$$phase||n.$apply()})}}}}}}]),angular.module("famous.angular").directive("faContainerSurface",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,o,a){return{pre:function(n,o,a){var t=r.ensureIsolate(n),s=e["famous/surfaces/ContainerSurface"],i=n.$eval(a.faOptions)||{};t.renderNode=new s(i),r.addRole("renderable",t),t.show(),r.sequenceWith(n,function(e){t.renderNode.add(e.renderGate)},function(){throw new Error("unimplemented: fa-container-surface does not support removing children")})},post:function(e,n){var o=r.ensureIsolate(e);a(e,function(e){n.find("div").append(e)}),r.registerChild(e,n,o)}}}}}]),angular.module("famous.angular").directive("faFlexibleLayout",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,o,a){return{pre:function(n,o,a){var t=r.ensureIsolate(n),s=e["famous/views/FlexibleLayout"],i=(e["famous/core/ViewSequence"],e["famous/core/RenderNode"],[]),u=n.$eval(a.faOptions)||{};t.renderNode=new s(u),r.addRole("renderable",t),t.show();var f=function(){i.sort(function(e,r){return e.index-r.index}),t.renderNode.sequenceFrom(function(e){var r=[];return angular.forEach(e,function(e,n){r[n]=e.renderGate}),r}(i))};r.sequenceWith(n,function(e){i.push(e),f()},function(e){i=function(r){var n=[];return angular.forEach(r,function(r){r.id!==e&&n.push(r)}),n}(i),f()})},post:function(e,n){var o=r.ensureIsolate(e);a(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",o)}}}}}]),angular.module("famous.angular").directive("faFlipper",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,o,a){return{pre:function(n,o,a){var t=r.ensureIsolate(n),s=e["famous/views/Flipper"],i=n.$eval(a.faOptions)||{};t.renderNode=new s(i),r.addRole("renderable",t),t.show(),t.children=[],t.flip=function(e){t.renderNode.flip(e||n.$eval(a.faOptions))},r.sequenceWith(n,function(e){var r=t.children.length;if(0==r)t.renderNode.setFront(e.renderGate);else{if(1!=r)throw new Error("fa-flipper accepts only two child elements; more than two have been provided");t.renderNode.setBack(e.renderGate)}t.children.push(e.renderGate)},function(){t.children.splice(t.children.length-1,1)})},post:function(e,n){var o=r.ensureIsolate(e);a(e,function(e){n.find("div").append(e)}),r.registerChild(e,n,o)}}}}}]),angular.module("famous.angular").directive("faGridLayout",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,o,a){return{pre:function(n,o,a){var t=r.ensureIsolate(n),s=e["famous/views/GridLayout"],i=(e["famous/core/ViewSequence"],[]),u=n.$eval(a.faOptions)||{};t.renderNode=new s(u),r.addRole("renderable",t),t.show(),n.$watch(function(){return n.$eval(a.faOptions)},function(e){t.renderNode.setOptions(e)},!0);var f=function(){n.$$postDigest(function(){i.sort(function(e,r){return e.index-r.index}),t.renderNode.sequenceFrom(function(e){var r=[];return angular.forEach(e,function(e,n){r[n]=e.renderGate}),r}(i))})};r.sequenceWith(n,function(e){i.push(e),f()},function(e){i=function(r){var n=[];return angular.forEach(r,function(r){r.id!==e&&n.push(r)}),n}(i),f()},f)},post:function(e,n){var o=r.ensureIsolate(e);a(e,function(e){n.find("div").append(e)}),r.registerChild(e,n,o)}}}}}]),angular.module("famous.angular").directive("faHeaderFooterLayout",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,o,a){var t=e["famous/views/HeaderFooterLayout"],s=e["famous/core/RenderNode"];return{pre:function(e,n,o){var a=r.ensureIsolate(e),i=(new s,new s,new s,e.$eval(o.faOptions)||{});a.renderNode=new t(i),r.addRole("renderable",a),a.show();var u=0;r.sequenceWith(e,function(e){if(u++,1===u)a.renderNode.header.add(e.renderGate);else if(2===u)a.renderNode.content.add(e.renderGate);else{if(3!==u)throw new Error("fa-header-footer-layout can accept no more than 3 children");a.renderNode.footer.add(e.renderGate)}},function(){throw new Error("unimplemented: fa-header-footer-layout does not support removing children")})},post:function(e,n){var o=r.ensureIsolate(e);a(e,function(e){n.find("div").append(e)}),r.registerChild(e,n,o)}}}}}]),angular.module("famous.angular").directive("faImageSurface",["$famous","$famousDecorator",function(e,r){return{scope:!0,template:'<div class="fa-image-surface"></div>',restrict:"EA",compile:function(){return{pre:function(n,o,a){{var t=r.ensureIsolate(n),s=e["famous/surfaces/ImageSurface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}n.$watch(function(){return t.getProperties()},function(){t.renderNode&&t.renderNode.setProperties(t.getProperties())},!0);var i=function(e){return"fa"+e.charAt(0).toUpperCase()+e.slice(1)};t.getProperties=function(){for(var e=n.$eval(a.faProperties)||{},r=["backgroundColor","color"],o=0;o<r.length;o++){var t=r[o],s=i(t);a[s]&&(e[t]=n.$eval(a[s]))}return e},t.renderNode=new s({size:n.$eval(a.faSize),"class":n.$eval(a.class),properties:t.getProperties()}),r.addRole("renderable",t),t.show(),a.class&&t.renderNode.setClasses(a["class"].split(" "))},post:function(e,n,o){var a=r.ensureIsolate(e),t=function(){a.renderNode.setContent(o.faImageUrl)};t(),o.$observe("faImageUrl",t),r.registerChild(e,n,a)}}}}}]),angular.module("famous.angular").directive("faIndex",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(e,n,o){var a=r.ensureIsolate(e);a.index=e.$eval(o.faIndex),e.$watch(function(){return e.$eval(o.faIndex)},function(){a.index=e.$eval(o.faIndex),a.updateMethod&&a.updateMethod()})}}}}}]),angular.module("famous.angular").directive("faModifier",["$famous","$famousDecorator","$parse","$rootScope",function(e,r,n,o){return{template:"<div></div>",transclude:!0,restrict:"EA",priority:2,scope:!0,compile:function(a,t,s){return{post:function(a,t,i){function u(e){return e.replace(g,function(e,r,n,o){return o?n.toUpperCase():n}).replace(h,"Moz$1")}function f(e){return u(e.replace($,""))}var c=r.ensureIsolate(a),l=e["famous/core/RenderNode"],d=e["famous/core/Modifier"],m=e["famous/core/Transform"],p=e["famous/physics/bodies/Particle"],v=function(e){return e.getPosition()},g=/([\:\-\_]+(.))/g,h=/^moz([A-Z])/,$=/^(x[\:\-_]|data[\:\-_])/i,y=["aboutOrigin","perspective","rotate","rotateAxis","rotateX","rotateY","rotateZ","scale","skew","translate"];i.$observe("faTransformOrder",function(){var e=a.$eval(i.faTransformOrder);void 0!==e&&(y=e)});var w={};angular.forEach(y,function(e){var r=f("fa-"+e);i.$observe(r,function(){w[e]=n(i[r])})});var S=angular.noop;i.$observe("faTransform",function(){S=n(i.faTransform)}),c.getTransform=function(){var e=S(a);if(void 0!==e)return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e;var r=[];return angular.forEach(y,function(e){var n=w[e]?w[e](a):void 0;void 0!==n&&(n instanceof Function&&(n=n()),r.push(n instanceof Array?m[e].apply(this,n):n instanceof p?m[e].apply(this,v(n)):m[e].call(this,n)))}),r.length?1===r.length?r[0]:m.multiply.apply(this,r):void 0};var b=angular.noop;i.$observe("faAlign",function(){b=n(i.faAlign)}),c.getAlign=function(){var e=b(a);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof p?v(e):e};var T=angular.noop;i.$observe("faOpacity",function(){T=n(i.faOpacity)}),c.getOpacity=function(){var e=T(a);return void 0===e?1:e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof p?v(e):e};var C=angular.noop;i.$observe("faSize",function(){C=n(i.faSize)}),c.getSize=function(){var e=C(a);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof p?v(e):e};var N=angular.noop;i.$observe("faOrigin",function(){N=n(i.faOrigin)}),c.getOrigin=function(){var e=N(a);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof p?v(e):e},c.modifier=new d({transform:c.getTransform,size:c.getSize,opacity:c.getOpacity,origin:c.getOrigin,align:c.getAlign}),c.renderNode=(new l).add(c.modifier),r.addRole("renderable",c),c.show(),r.sequenceWith(a,function(e){c.renderNode.add(e.renderGate)}),s(a,function(e){t.find("div").append(e)}),r.registerChild(a,t,c,function(){c.modifier.setOpacity(0)}),a.$$phase||o.$$phase||a.$apply()}}}}}]),angular.module("famous.angular").directive("faMouseover",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(n,o,a){var t=r.ensureIsolate(n);if(a.faMouseover){var s=t.renderNode._eventInput||t.renderNode;s.on("mouseover",function(r){var o=e(a.faMouseover);o(n,{$event:r}),n.$$phase||n.$apply()})}}}}}}]),angular.module("famous.angular").directive("faPipeFrom",["$famous","$famousDecorator","$famousPipe",function(e,r,n){return{restrict:"A",scope:!1,priority:16,compile:function(){var o=e["famous/core/Engine"];return{post:function(e,a,t){var s=r.ensureIsolate(e);e.$watch(function(){return e.$eval(t.faPipeFrom)},function(e,r){var a=s.renderNode||o;n.unpipesFromTargets(a,r),n.pipesToTargets(a,e)}),e.$on("$destroy",function(){n.unpipesFromTargets(s.renderNode||o,e.$eval(t.faPipeFrom))})}}}}}]),angular.module("famous.angular").directive("faPipeTo",["$famous","$famousDecorator","$famousPipe",function(e,r,n){return{restrict:"A",scope:!1,priority:16,compile:function(){var o=e["famous/core/Engine"];return{post:function(e,a,t){var s=r.ensureIsolate(e);e.$watch(function(){return e.$eval(t.faPipeTo)},function(e,r){var a=s.renderNode||o;n.unpipesFromTargets(r,a),n.pipesToTargets(e,a)}),e.$on("$destroy",function(){n.unpipesFromTargets(e.$eval(t.faPipeTo),s.renderNode||o)})}}}}}]),angular.module("famous.angular").directive("faRenderNode",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(n,o,a){return{pre:function(n,o,a){{var t=r.ensureIsolate(n),s=e["famous/core/Engine"];e["famous/core/RenderNode"]}t.children=[],a.$observe("faPipeTo",function(e){var r=n.$eval(e);r&&s.pipe(r)}),t.renderNode=n.$eval(a.faNode),r.addRole("renderable",t),t.show(),r.sequenceWith(n,function(e){t.renderNode.add(e.renderGate),t.children.push(e)})},post:function(e,n){var o=r.ensureIsolate(e);a(e,function(e){n.find("div").append(e)}),r.registerChild(e,n,o)}}}}}]),angular.module("famous.angular").directive("faScrollView",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,o,a){return{pre:function(n,o,a){var t=r.ensureIsolate(n),s=e["famous/views/Scrollview"],i=e["famous/core/ViewSequence"],u=(e["famous/core/Surface"],[]),f=n.$eval(a.faOptions)||{};t.renderNode=new s(f),r.addRole("renderable",t),t.show();var c=function(e){n.$$postDigest(function(){u.sort(function(e,r){return e.index-r.index});var r={array:function(e){var r=[];return angular.forEach(e,function(e,n){r[n]=e.renderGate}),r}(u)};e&&(r.index=n.$eval(a.faStartIndex));var o=new i(r);t.renderNode.sequenceFrom(o)})};r.sequenceWith(n,function(e){u.push(e),c(!0)},function(e){u=function(r){var n=[];return angular.forEach(r,function(r){r.id!==e&&n.push(r)}),n}(u),c()},c)},post:function(e,n){var o=r.ensureIsolate(e);a(e,function(e){n.find("div").append(e)}),r.registerChild(e,n,o)}}}}}]),angular.module("famous.angular").directive("faSequentialLayout",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,o,a){return window.$f=e,{pre:function(n,o,a){var t=r.ensureIsolate(n),s=e["famous/views/SequentialLayout"],i=[],u=n.$eval(a.faOptions)||{};t.renderNode=new s(u),r.addRole("renderable",t),t.show();var f=function(){i.sort(function(e,r){return e.index-r.index}),t.renderNode.sequenceFrom(function(e){var r=[];return angular.forEach(e,function(e,n){r[n]=e.renderGate}),r}(i))};r.sequenceWith(n,function(e){i.push(e),f()},function(e){i=function(r){var n=[];return angular.forEach(r,function(r){r.id!==e&&n.push(r)}),n}(i),f()})},post:function(e,n){var o=r.ensureIsolate(e);a(e,function(e){n.find("div").append(e)}),r.registerChild(e,n,o)}}}}}]),angular.module("famous.angular").directive("faSurface",["$famous","$famousDecorator","$interpolate","$controller","$compile",function(e,r){return{scope:!0,transclude:!0,template:'<div class="fa-surface"></div>',restrict:"EA",compile:function(n,o,a){return{pre:function(n,o,a){{var t=r.ensureIsolate(n),s=e["famous/core/Surface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}n.$watch(function(){return t.getProperties()},function(){t.renderNode&&t.renderNode.setProperties(t.getProperties())},!0);var i=function(e){return"fa"+e.charAt(0).toUpperCase()+e.slice(1)};t.getProperties=function(){for(var e=n.$eval(a.faProperties)||{},r=["backgroundColor","margin","padding","color","pointerEvents","zIndex"],o=0;o<r.length;o++){var t=r[o],s=i(t);a[s]&&(e[t]=n.$eval(a[s]))}return e},t.renderNode=new s({size:n.$eval(a.faSize),properties:t.getProperties()}),r.addRole("renderable",t),t.show(),a.class&&t.renderNode.setClasses(a["class"].split(" "))},post:function(e,n){var o=r.ensureIsolate(e),t=function(){o.renderNode.setContent(n[0].querySelector("div.fa-surface"))};t(),a(e,function(e){angular.element(n[0].querySelectorAll("div.fa-surface")).append(e)}),r.registerChild(e,n,o,function(){})}}}}}]),angular.module("famous.angular").directive("faTap",["$parse","$famousDecorator",function(e,r){return{restrict:"A",compile:function(){return{post:function(n,o,a){var t=r.ensureIsolate(n);if(a.faTap){var s=t.renderNode._eventInput||t.renderNode,i=!1;s.on("touchmove",function(e){return i=!0,e}),s.on("touchend",function(r){if(!i){var o=e(a.faTap);o(n,{$event:r}),n.$$phase||n.$apply()}i=!1})}}}}}}]),angular.module("famous.angular").directive("faTouchend",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(n,o,a){var t=r.ensureIsolate(n);if(a.faTouchend){var s=t.renderNode._eventInput||t.renderNode;s.on("touchend",function(r){var o=e(a.faTouchend);o(n,{$event:r}),n.$$phase||n.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchmove",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(n,o,a){var t=r.ensureIsolate(n);if(a.faTouchmove){var s=t.renderNode._eventInput||t.renderNode;s.on("touchmove",function(r){var o=e(a.faTouchmove);o(n,{$event:r}),n.$$phase||n.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchstart",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(n,o,a){var t=r.ensureIsolate(n);if(a.faTouchstart){var s=t.renderNode._eventInput||t.renderNode;s.on("touchstart",function(r){var o=e(a.faTouchstart);o(n,{$event:r}),n.$$phase||n.$apply()})}}}}}}]),angular.module("famous.angular").directive("faVideoSurface",["$famous","$famousDecorator",function(e,r){return{scope:!0,transclude:!0,template:'<div class="fa-video-surface"></div>',restrict:"EA",compile:function(){return{pre:function(n,o,a){var t=r.ensureIsolate(n),s=e["famous/surfaces/VideoSurface"];n.$watch(function(){return n.$eval(a.faOptions)},function(e,r){t.renderNode.setOptions(r)},!0),t.renderNode=new s({"class":n.$eval(a.class)}),a.class&&t.renderNode.setClasses(a["class"].split(" "))},post:function(e,n,o){var a=r.ensureIsolate(e),t=function(){a.renderNode.setContent(o.faVideoUrl)};t(),o.$observe("faVideoUrl",t),r.registerChild(e,n,a)}}}}}]),angular.module("famous.angular").directive("faView",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(n,o,a){var t=e["famous/core/View"];return{pre:function(e,n,o){var a=r.ensureIsolate(e);a.children=[],a.renderNode=new t({size:e.$eval(o.faSize)||[void 0,void 0]}),r.addRole("renderable",a),a.show(),r.sequenceWith(e,function(e){a.renderNode.add(e.renderGate),a.children.push(e)})},post:function(e,n){var o=r.ensureIsolate(e);a(e,function(e){n.find("div").append(e)}),r.registerChild(e,n,o)}}}}}]);